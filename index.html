<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Website Under Development</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Courier New', Courier, monospace;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    background: #1e1e1e;
    color: #ffffff;
    padding: 20px;
}
.glass-container {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,0.2);
    padding: 40px 30px;
    max-width: 500px;
    width: 100%;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
}
h1 {
    font-size: 2rem;
    color: #00f2fe;
    margin-bottom: 20px;
}
h2 {
    font-size: 1.3rem;
    color: #ffffff;
    margin: 20px 0 15px 0;
}
p {
    font-size: 1rem;
    margin-bottom: 20px;
    line-height: 1.5;
    color: #ccc;
}
.button {
    display: inline-block;
    padding: 12px 25px;
    margin: 8px;
    font-size: 0.95rem;
    font-weight: bold;
    color: #fff;
    text-decoration: none;
    border-radius: 10px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    font-family: 'Courier New', Courier, monospace;
}
.button:hover {
    transform: scale(1.05);
    box-shadow: 0 0 8px #667eea, 0 0 12px #764ba2;
}
.button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}
.section {
    margin: 20px 0;
    padding: 20px 0;
    border-top: 1px solid rgba(255,255,255,0.2);
}
.section:first-of-type { border-top: none; }
.footer-text {
    margin-top: 25px;
    font-size: 1rem;
    font-weight: 700;
    color: #ffffff;
}
/* Page visibility */
.page {
    display: none;
}
.page.active {
    display: block;
}
/* Login Page Styles */
.input-group {
    margin: 15px 0;
    text-align: left;
}
.input-group label {
    display: block;
    margin-bottom: 5px;
    color: #00f2fe;
    font-size: 0.9rem;
}
.input-group input {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.3);
    background: rgba(255,255,255,0.1);
    color: #fff;
    font-size: 0.95rem;
    font-family: 'Courier New', Courier, monospace;
}
.input-group input::placeholder {
    color: rgba(255,255,255,0.5);
}
.input-group input:focus {
    outline: none;
    border-color: #00f2fe;
    box-shadow: 0 0 5px rgba(0,242,254,0.3);
}

.message {
    padding: 10px;
    border-radius: 8px;
    margin: 10px 0;
    font-size: 0.9rem;
    display: none;
}
.message.show {
    display: block;
}
.error-msg {
    background: rgba(255,85,85,0.2);
    border: 1px solid #ff5555;
    color: #ff8888;
}
.success-msg {
    background: rgba(85,255,85,0.2);
    border: 1px solid #55ff55;
    color: #88ff88;
}
.info-msg {
    background: rgba(0,242,254,0.2);
    border: 1px solid #00f2fe;
    color: #00f2fe;
}
.toggle-link {
    color: #00f2fe;
    cursor: pointer;
    text-decoration: underline;
    font-size: 0.9rem;
    margin-top: 15px;
    display: inline-block;
}
.toggle-link:hover {
    color: #33f5ff;
}
.user-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin: 0 auto 15px;
    border: 3px solid #00f2fe;
    object-fit: cover;
}
.loading {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 0.6s linear infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}
@media (max-width: 600px){
    .glass-container { padding: 30px 20px; }
    h1 { font-size: 1.6rem; }
    h2 { font-size: 1.1rem; }
    p { font-size: 0.95rem; }
    .button { padding: 10px 20px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="glass-container">
    <!-- Warning Page -->
    <div id="warningPage" class="page active">
        <h1>‚ö†Ô∏è Website Under Development ‚ö†Ô∏è</h1>
        <p>
            Dear User,<br><br>
            Welcome! Aap jo website visit kar rahe hain, wo abhi actively development me hai. 
            Is website me kuch features incomplete ho sakte hain, bugs ya errors aa sakte hain, 
            aur kabhi kabhi website temporarily unavailable bhi ho sakti hai.<br><br>
            Hum aapko recommend karte hain ki koi bhi issue ya unexpected behavior ho toh aap <strong>directly developer se contact kare</strong>:
        </p>
        <div class="section">
            <h2>Contact Developer</h2>
            <a href="mailto:indiangame744@gmail.com?subject=Website%20Issue" target="_blank" class="button">Email</a>
            <a href="https://www.instagram.com/direct/new/?username=aryan.singh.783" target="_blank" class="button">Instagram</a>
        </div>
        <div class="section">
            <h2>Continue to Website</h2>
            <button class="button" id="continueBtn">Login to Continue</button>
        </div>
        <p class="footer-text">‚Äî Developed & Maintained by Aryan Singh</p>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="page">
        <h1>üîê Login</h1>
        <p>Please login to continue</p>
        
        <div id="messageContainer"></div>
        
        <div id="emailLoginForm">
            <div class="input-group">
                <label for="loginEmail">Email Address</label>
                <input type="email" id="loginEmail" placeholder="your@email.com" autocomplete="email">
            </div>
            <div class="input-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="Enter password" autocomplete="current-password">
            </div>
            <button class="button" id="emailLoginBtn" style="width: 100%;">Login</button>
            <p class="toggle-link" id="showSignupLink">Don't have an account? Sign Up</p>
        </div>

        <div id="emailSignupForm" style="display: none;">
            <div class="input-group">
                <label for="signupEmail">Email Address</label>
                <input type="email" id="signupEmail" placeholder="your@email.com" autocomplete="email">
            </div>
            <div class="input-group">
                <label for="signupPassword">Password</label>
                <input type="password" id="signupPassword" placeholder="Min 6 characters" autocomplete="new-password">
            </div>
            <div class="input-group">
                <label for="signupConfirmPassword">Confirm Password</label>
                <input type="password" id="signupConfirmPassword" placeholder="Re-enter password" autocomplete="new-password">
            </div>
            <button class="button" id="emailSignupBtn" style="width: 100%;">Sign Up</button>
            <p class="toggle-link" id="showLoginLink">Already have an account? Login</p>
        </div>

        <p class="toggle-link" id="backToWarning" style="margin-top: 20px;">‚Üê Back to Warning</p>
    </div>

    <!-- User Dashboard -->
    <div id="userDashboard" class="page">
        <h1>Welcome! üëã</h1>
        <img id="userAvatar" src="" alt="User Avatar" class="user-avatar" style="display: none;">
        <h2 id="userName">Loading...</h2>
        <p id="userEmail" style="color: #00f2fe;"></p>
        
        <div class="section">
            <h2>Continue to Website</h2>
            <a href="python-pc.html?access=python783" class="button">Enter for Computer</a>
            <a href="python-mp.html?access=python876" class="button">Enter for Mobile Phone</a>
        </div>

        <button class="button" id="logoutBtn" style="background: linear-gradient(135deg, #f093fb, #f5576c); margin-top: 20px;">
            Logout
        </button>
        <p class="footer-text">‚Äî Developed & Maintained by Aryan Singh</p>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

// Firebase Configuration
const firebaseConfig = {
    apiKey: "AIzaSyDXiu76EYivyTDXmMGLuiT9hWh5J25ApJU",
    authDomain: "web-python-idle.firebaseapp.com",
    projectId: "web-python-idle",
    storageBucket: "web-python-idle.firebasestorage.app",
    messagingSenderId: "194648972875",
    appId: "1:194648972875:web:9eae9a765ba42c78e3f7ce",
    measurementId: "G-MMS9T8CXT3"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const auth = getAuth(app);

// State management
let currentPage = 'warning';
let isProcessing = false;

// DOM Elements
const pages = {
    warning: document.getElementById('warningPage'),
    login: document.getElementById('loginPage'),
    dashboard: document.getElementById('userDashboard')
};

const buttons = {
    continue: document.getElementById('continueBtn'),
    emailLogin: document.getElementById('emailLoginBtn'),
    emailSignup: document.getElementById('emailSignupBtn'),
    logout: document.getElementById('logoutBtn'),
    showSignup: document.getElementById('showSignupLink'),
    showLogin: document.getElementById('showLoginLink'),
    backToWarning: document.getElementById('backToWarning')
};

const forms = {
    login: document.getElementById('emailLoginForm'),
    signup: document.getElementById('emailSignupForm')
};

const inputs = {
    loginEmail: document.getElementById('loginEmail'),
    loginPassword: document.getElementById('loginPassword'),
    signupEmail: document.getElementById('signupEmail'),
    signupPassword: document.getElementById('signupPassword'),
    signupConfirmPassword: document.getElementById('signupConfirmPassword')
};

// Helper Functions
function showPage(pageName) {
    Object.keys(pages).forEach(key => {
        pages[key].classList.remove('active');
    });
    if (pages[pageName]) {
        pages[pageName].classList.add('active');
        currentPage = pageName;
    }
}

function showMessage(message, type = 'error') {
    const container = document.getElementById('messageContainer');
    const msgDiv = document.createElement('div');
    msgDiv.className = `message ${type}-msg show`;
    msgDiv.textContent = message;
    
    container.innerHTML = '';
    container.appendChild(msgDiv);
    
    setTimeout(() => {
        msgDiv.classList.remove('show');
        setTimeout(() => msgDiv.remove(), 300);
    }, 5000);
}

function clearMessages() {
    document.getElementById('messageContainer').innerHTML = '';
}

function setButtonLoading(button, isLoading) {
    if (isLoading) {
        button.disabled = true;
        button.dataset.originalText = button.innerHTML;
        button.innerHTML = '<span class="loading"></span> Loading...';
    } else {
        button.disabled = false;
        if (button.dataset.originalText) {
            button.innerHTML = button.dataset.originalText;
        }
    }
}

function clearInputs() {
    Object.values(inputs).forEach(input => {
        if (input) input.value = '';
    });
}

function validateEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

// Auth Functions
async function handleEmailLogin() {
    if (isProcessing) return;
    isProcessing = true;
    
    clearMessages();
    setButtonLoading(buttons.emailLogin, true);
    
    const email = inputs.loginEmail.value.trim();
    const password = inputs.loginPassword.value;
    
    if (!email || !password) {
        showMessage('Please fill in all fields', 'error');
        isProcessing = false;
        setButtonLoading(buttons.emailLogin, false);
        return;
    }
    
    if (!validateEmail(email)) {
        showMessage('Please enter a valid email address', 'error');
        isProcessing = false;
        setButtonLoading(buttons.emailLogin, false);
        return;
    }
    
    try {
        const result = await signInWithEmailAndPassword(auth, email, password);
        console.log('Email Login Success:', result.user.email);
        showMessage('Login successful! Redirecting...', 'success');
        clearInputs();
    } catch (error) {
        console.error('Email Login Error:', error);
        let errorMessage = 'Login failed. ';
        
        if (error.code === 'auth/user-not-found') {
            errorMessage += 'No account found with this email.';
        } else if (error.code === 'auth/wrong-password') {
            errorMessage += 'Incorrect password.';
        } else if (error.code === 'auth/invalid-email') {
            errorMessage += 'Invalid email format.';
        } else if (error.code === 'auth/invalid-credential') {
            errorMessage += 'Invalid email or password.';
        } else if (error.code === 'auth/too-many-requests') {
            errorMessage += 'Too many attempts. Try again later.';
        } else {
            errorMessage += 'Please check your credentials.';
        }
        
        showMessage(errorMessage, 'error');
    } finally {
        isProcessing = false;
        setButtonLoading(buttons.emailLogin, false);
    }
}

async function handleEmailSignup() {
    if (isProcessing) return;
    isProcessing = true;
    
    clearMessages();
    setButtonLoading(buttons.emailSignup, true);
    
    const email = inputs.signupEmail.value.trim();
    const password = inputs.signupPassword.value;
    const confirmPassword = inputs.signupConfirmPassword.value;
    
    if (!email || !password || !confirmPassword) {
        showMessage('Please fill in all fields', 'error');
        isProcessing = false;
        setButtonLoading(buttons.emailSignup, false);
        return;
    }
    
    if (!validateEmail(email)) {
        showMessage('Please enter a valid email address', 'error');
        isProcessing = false;
        setButtonLoading(buttons.emailSignup, false);
        return;
    }
    
    if (password.length < 6) {
        showMessage('Password must be at least 6 characters', 'error');
        isProcessing = false;
        setButtonLoading(buttons.emailSignup, false);
        return;
    }
    
    if (password !== confirmPassword) {
        showMessage('Passwords do not match', 'error');
        isProcessing = false;
        setButtonLoading(buttons.emailSignup, false);
        return;
    }
    
    try {
        const result = await createUserWithEmailAndPassword(auth, email, password);
        console.log('Signup Success:', result.user.email);
        showMessage('Account created successfully! Redirecting...', 'success');
        clearInputs();
    } catch (error) {
        console.error('Signup Error:', error);
        let errorMessage = 'Signup failed. ';
        
        if (error.code === 'auth/email-already-in-use') {
            errorMessage += 'Email already registered. Please login.';
        } else if (error.code === 'auth/invalid-email') {
            errorMessage += 'Invalid email format.';
        } else if (error.code === 'auth/weak-password') {
            errorMessage += 'Password is too weak.';
        } else {
            errorMessage += error.message;
        }
        
        showMessage(errorMessage, 'error');
    } finally {
        isProcessing = false;
        setButtonLoading(buttons.emailSignup, false);
    }
}

async function handleLogout() {
    if (isProcessing) return;
    isProcessing = true;
    
    setButtonLoading(buttons.logout, true);
    
    try {
        await signOut(auth);
        console.log('Logout Success');
        clearInputs();
        showPage('warning');
    } catch (error) {
        console.error('Logout Error:', error);
        alert('Error signing out. Please try again.');
    } finally {
        isProcessing = false;
        setButtonLoading(buttons.logout, false);
    }
}

function showDashboard(user) {
    const userName = document.getElementById('userName');
    const userEmail = document.getElementById('userEmail');
    const userAvatar = document.getElementById('userAvatar');
    
    userName.textContent = user.displayName || 'User';
    userEmail.textContent = user.email || 'No email';
    
    if (user.photoURL) {
        userAvatar.src = user.photoURL;
        userAvatar.style.display = 'block';
        userAvatar.onerror = function() {
            this.style.display = 'none';
        };
    } else {
        userAvatar.style.display = 'none';
    }
    
    showPage('dashboard');
}

function toggleAuthMode(showSignup) {
    clearMessages();
    clearInputs();
    
    if (showSignup) {
        forms.login.style.display = 'none';
        forms.signup.style.display = 'block';
    } else {
        forms.login.style.display = 'block';
        forms.signup.style.display = 'none';
    }
}

// Event Listeners
buttons.continue.addEventListener('click', () => {
    clearMessages();
    showPage('login');
});

buttons.emailLogin.addEventListener('click', handleEmailLogin);

buttons.emailSignup.addEventListener('click', handleEmailSignup);

buttons.logout.addEventListener('click', handleLogout);

buttons.showSignup.addEventListener('click', () => toggleAuthMode(true));

buttons.showLogin.addEventListener('click', () => toggleAuthMode(false));

buttons.backToWarning.addEventListener('click', () => {
    clearMessages();
    clearInputs();
    showPage('warning');
});

// Enter key support
inputs.loginEmail.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') handleEmailLogin();
});
inputs.loginPassword.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') handleEmailLogin();
});
inputs.signupConfirmPassword.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') handleEmailSignup();
});

// Auth State Observer
onAuthStateChanged(auth, (user) => {
    console.log('Auth State Changed:', user ? user.email : 'No user');
    
    if (user) {
        setTimeout(() => showDashboard(user), 500);
    } else {
        if (currentPage === 'dashboard') {
            showPage('warning');
        }
    }
});

console.log('Firebase Auth initialized successfully');
</script>
</body>
</html>
